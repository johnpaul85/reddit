(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{145:function(e,t,a){},146:function(e,t,a){},148:function(e,t,a){},150:function(e,t,a){},151:function(e,t,a){},152:function(e,t,a){},153:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(11),o=a.n(c),s=(a(57),a(5)),l=(a(63),a(49)),i=a(24),u=a(7),m=a.n(u),d=(a(33),a(12)),p=a(23),f=a.n(p),b=function(e,t){for(var a=["k","M","G","T","P","E","Z","Y"],n=a.length-1;n>=0;n-=1){var r=Math.pow(1e3,n+1);if(e<=-r||e>=r)return+(e/r).toFixed(t)+a[n]}return e},E=(a(65),function(e){return r.a.createElement("div",{className:"card ".concat(e.className)},e.children)}),h=a(45),v=a.n(h),g=(a(145),a(146),function(e){var t=e.name;return r.a.createElement("img",{src:"https://api.adorable.io/avatars/10/".concat(t),alt:"".concat(t," profile"),className:"avatar-profile-image"})}),N=function(e){var t=e.comment;return r.a.createElement("div",{className:"comment"},r.a.createElement("div",{className:"comment-metadata"},r.a.createElement(g,{name:t.author}),r.a.createElement("p",{className:"comment-author"},t.author),r.a.createElement("p",{className:"comment-created-time"},f.a.unix(t.created_utc).fromNow())),r.a.createElement(v.a,{source:t.body}))},y=function(e){var t=Object(n.useState)(0),a=Object(i.a)(t,2),c=a[0],o=a[1],s=e.post,l=e.onToggleComments,u=function(e){o(e===c?0:1===e?1:-1)};return r.a.createElement("article",{key:s.id},r.a.createElement(E,null,r.a.createElement("div",{className:"post-wrapper"},r.a.createElement("div",{className:"post-votes-container"},r.a.createElement("button",{type:"button",className:"icon-action-button up-vote ".concat(1===c&&"active"),onClick:function(){return u(1)},"aria-label":"Up vote"},1===c?r.a.createElement(d.d,{className:"icon-action"}):r.a.createElement(d.c,{className:"icon-action"})),r.a.createElement("p",{className:"post-votes-value ".concat(1===c?"up-vote":-1===c?"down-vote":"")},b(s.ups,1)),r.a.createElement("button",{type:"button",className:"icon-action-button down-vote ".concat(-1===c&&"active"),onClick:function(){return u(-1)},"aria-label":"Down vote"},-1===c?r.a.createElement(d.b,{className:"icon-action"}):r.a.createElement(d.a,{className:"icon-action"}))),r.a.createElement("div",{className:"post-container"},r.a.createElement("h3",{className:"post-title"},s.title),r.a.createElement("div",{className:"post-image-container"},r.a.createElement("img",{src:s.url,alt:"",className:"post-image"})),r.a.createElement("div",{className:"post-details"},r.a.createElement("span",{className:"author-details"},r.a.createElement(g,{name:s.author}),r.a.createElement("span",{className:"author-username"},s.author)),r.a.createElement("span",null,f.a.unix(s.created_utc).fromNow()),r.a.createElement("span",{className:"post-comments-container"},r.a.createElement("button",{type:"button",className:"icon-action-button ".concat(s.showingComments&&"showing-comments"),onClick:function(){return l(s.permalink)},"aria-label":"Show comments"},r.a.createElement(d.e,{className:"icon-action"})),b(s.num_comments,1))),s.errorComments?r.a.createElement("div",null,r.a.createElement("h3",null,"Error loading comments")):s.loadingComments?r.a.createElement("div",null,r.a.createElement(m.a,null),r.a.createElement(m.a,null),r.a.createElement(m.a,null),r.a.createElement(m.a,null)):s.showingComments?r.a.createElement("div",null,s.comments.map((function(e){return r.a.createElement(N,{comment:e,key:e.id})}))):null))))},w=(a(148),function(e,t){return Math.floor(Math.random()*t)+e}),S=function(){return r.a.createElement("article",{className:"post"},r.a.createElement("div",{className:"post-votes-container"},r.a.createElement("button",{type:"button",className:"icon-action-button up-vote","aria-label":"Up vote"},r.a.createElement(d.c,{className:"icon-action"})),r.a.createElement(m.a,{className:"post-votes-value post-votes-value-loading"}),r.a.createElement("button",{type:"button",className:"icon-action-button down-vote","aria-label":"Down vote"},r.a.createElement(d.a,{className:"icon-action"}))),r.a.createElement("div",{className:"post-container"},r.a.createElement("h3",{className:"post-title"},r.a.createElement(m.a,{width:w(100,200)})),r.a.createElement("div",{className:"post-image-container"},r.a.createElement(m.a,{height:250})),r.a.createElement("div",{className:"post-details"},r.a.createElement("span",null,r.a.createElement(m.a,{width:w(20,50)})),r.a.createElement("span",null,r.a.createElement(m.a,{width:w(50,100)})),r.a.createElement("span",{className:"post-comments-container"},r.a.createElement("button",{type:"button",className:"icon-action-button","aria-label":"Show comments"},r.a.createElement(d.e,{className:"icon-action"})),r.a.createElement(m.a,{width:w(10,50)})))))},C=a(3),j=a.n(C),O=a(31),x=a(14),k=a(16),T=a(22),L="https://www.reddit.com",F=function(){var e=Object(x.a)(j.a.mark((function e(t){var a,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(L).concat(t,".json"));case 2:return a=e.sent,e.next=5,a.json();case 5:return n=e.sent,e.abrupt("return",n.data.children.map((function(e){return e.data})));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(x.a)(j.a.mark((function e(){var t,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(L,"/subreddits.json"));case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,e.abrupt("return",a.data.children.map((function(e){return e.data})));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),G=function(){var e=Object(x.a)(j.a.mark((function e(t){var a,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(L).concat(t,".json"));case 2:return a=e.sent,e.next=5,a.json();case 5:return n=e.sent,e.abrupt("return",n[1].data.children.map((function(e){return e.data})));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=Object(k.b)({name:"redditPosts",initialState:{posts:[],error:!1,isLoading:!1,searchTerm:"",selectedSubreddit:"/r/pics/"},reducers:{setPosts:function(e,t){e.posts=t.payload},startGetPosts:function(e){e.isLoading=!0,e.error=!1},getPostsSuccess:function(e,t){e.isLoading=!1,e.posts=t.payload},getPostsFailed:function(e){e.isLoading=!1,e.error=!0},setSearchTerm:function(e,t){e.searchTerm=t.payload},setSelectedSubreddit:function(e,t){e.selectedSubreddit=t.payload,e.searchTerm=""},toggleShowingComments:function(e,t){e.posts[t.payload].showingComments=!e.posts[t.payload].showingComments},startGetComments:function(e,t){e.posts[t.payload].showingComments=!e.posts[t.payload].showingComments,e.posts[t.payload].showingComments&&(e.posts[t.payload].loadingComments=!0,e.posts[t.payload].error=!1)},getCommentsSuccess:function(e,t){e.posts[t.payload.index].loadingComments=!1,e.posts[t.payload.index].comments=t.payload.comments},getCommentsFailed:function(e,t){e.posts[t.payload].loadingComments=!1,e.posts[t.payload].error=!0}}}),M=_.actions,D=(M.setPosts,M.getPostsFailed),J=M.getPostsSuccess,U=M.startGetPosts,z=M.setSearchTerm,A=M.setSelectedSubreddit,B=(M.toggleShowingComments,M.getCommentsFailed),I=M.getCommentsSuccess,R=M.startGetComments,Y=_.reducer,Z=function(e){return function(){var t=Object(x.a)(j.a.mark((function t(a){var n,r;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a(U()),t.next=4,F(e);case 4:n=t.sent,r=n.map((function(e){return Object(O.a)(Object(O.a)({},e),{},{showingComments:!1,comments:[],loadingComments:!1,errorComments:!1})})),a(J(r)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),a(D());case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()},q=function(e){return e.reddit.selectedSubreddit},H=Object(T.a)([function(e){return e.reddit.posts},function(e){return e.reddit.searchTerm}],(function(e,t){return""!==t?e.filter((function(e){return e.title.toLowerCase().includes(t.toLowerCase())})):e})),K=(a(150),function(){var e=Object(s.c)((function(e){return e.reddit})),t=e.isLoading,a=e.error,c=e.searchTerm,o=e.selectedSubreddit,i=Object(s.c)(H),u=Object(s.b)();Object(n.useEffect)((function(){u(Z(o))}),[o]);var m=function(e){return function(t){u(function(e,t){return function(){var a=Object(x.a)(j.a.mark((function a(n){var r;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n(R(e)),a.next=4,G(t);case 4:r=a.sent,n(I({index:e,comments:r})),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),n(B(e));case 11:case"end":return a.stop()}}),a,null,[[0,8]])})));return function(e){return a.apply(this,arguments)}}()}(e,t))}};return t?r.a.createElement(l.a,{animation:"zoom"},Array(w(3,10)).fill(r.a.createElement(S,null))):a?r.a.createElement("div",{className:"error"},r.a.createElement("h2",null,"Failed to load posts."),r.a.createElement("button",{type:"button",onClick:function(){return u(Z(o))}},"Try again")):0===i.length?r.a.createElement("div",{className:"error"},r.a.createElement("h2",null,'No posts matching "',c,'"'),r.a.createElement("button",{type:"button",onClick:function(){return u(z(""))}},"Go home")):r.a.createElement(r.a.Fragment,null,i.map((function(e,t){return r.a.createElement(y,{key:e.id,post:e,onToggleComments:m(t)})})))}),Q=a(48),V=(a(151),a(47)),W=function(){var e=Object(n.useState)(""),t=Object(i.a)(e,2),a=t[0],c=t[1],o=Object(s.c)((function(e){return e.reddit.searchTerm})),l=Object(s.b)();Object(n.useEffect)((function(){c(o)}),[o]);var u=function(e){e.preventDefault(),l(z(a))};return r.a.createElement("header",null,r.a.createElement("div",{className:"logo"},r.a.createElement(V.a,{className:"logo-icon"}),r.a.createElement("p",null,"Reddit",r.a.createElement("span",null,"Minimal"))),r.a.createElement("form",{className:"search",onSubmit:u},r.a.createElement("input",{type:"text",placeholder:"Search",value:a,onChange:function(e){c(e.target.value)},"aria-label":"Search posts"}),r.a.createElement("button",{type:"submit",onClick:u,"aria-label":"Search"},r.a.createElement(Q.a,null))))},X=Object(k.b)({name:"subreddits",initialState:{subreddits:[],error:!1,isLoading:!1},reducers:{startGetSubreddits:function(e){e.isLoading=!0,e.error=!1},getSubredditsSuccess:function(e,t){e.isLoading=!1,e.subreddits=t.payload},getSubredditsFailed:function(e){e.isLoading=!1,e.error=!0}}}),$=X.actions,ee=$.getSubredditsFailed,te=$.getSubredditsSuccess,ae=$.startGetSubreddits,ne=X.reducer,re=function(e){return e.subreddits.subreddits},ce=(a(152),function(){var e=Object(s.b)(),t=Object(s.c)(re),a=Object(s.c)(q);return Object(n.useEffect)((function(){e(function(){var e=Object(x.a)(j.a.mark((function e(t){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t(ae()),e.next=4,P();case 4:a=e.sent,t(te(a)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),t(ee());case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}())}),[e]),r.a.createElement(E,{className:"subreddit-card"},r.a.createElement("h2",null,"Subreddits"),r.a.createElement("ul",{className:"subreddits-list"},t.map((function(t){return r.a.createElement("li",{key:t.id,className:"".concat(a===t.url&&"selected-subreddit")},r.a.createElement("button",{type:"button",onClick:function(){return e(A(t.url))}},r.a.createElement("img",{src:t.icon_img||"https://api.adorable.io/avatars/25/".concat(t.display_name),alt:"".concat(t.display_name),className:"subreddit-icon",style:{border:"3px solid ".concat(t.primary_color)}}),t.display_name))}))))});var oe=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(W,null),r.a.createElement("main",null,r.a.createElement(K,null)),r.a.createElement("aside",null,r.a.createElement(ce,null)))},se=a(9),le=Object(k.a)({reducer:Object(se.c)({reddit:Y,subreddits:ne})});o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(s.a,{store:le},r.a.createElement(oe,null))),document.getElementById("root"))},33:function(e,t,a){},52:function(e,t,a){e.exports=a(153)},57:function(e,t,a){},63:function(e,t,a){},65:function(e,t,a){}},[[52,1,2]]]);
//# sourceMappingURL=main.ae5f2a58.chunk.js.map